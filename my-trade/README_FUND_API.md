# åœºå¤–åŸºé‡‘å®æ—¶ä¼°å€¼APIä½¿ç”¨æŒ‡å—

## ğŸ“š æ¦‚è¿°

æœ¬æ¨¡å—æä¾›äº†ä¾¿æ·çš„åœºå¤–åŸºé‡‘å®æ—¶ä¼°å€¼æŸ¥è¯¢åŠŸèƒ½ï¼ŒåŸºäºAKShareçš„`fund_value_estimation_em`æ¥å£å°è£…ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

1. **å•ä¸ªåŸºé‡‘æŸ¥è¯¢** - é€šè¿‡6ä½åŸºé‡‘ä»£ç æŸ¥è¯¢å®æ—¶ä¼°å€¼
2. **æ‰¹é‡æŸ¥è¯¢** - æŒ‰åŸºé‡‘ç±»å‹æŸ¥è¯¢æ‰€æœ‰åŸºé‡‘
3. **å…³é”®è¯æœç´¢** - æ ¹æ®åŸºé‡‘åç§°æˆ–ä»£ç æœç´¢
4. **æ’è¡Œæ¦œæŸ¥è¯¢** - è·å–æ¶¨å¹…å‰Nçš„åŸºé‡‘

## ğŸ“¦ æ–‡ä»¶è¯´æ˜

- `fund_api.py` - æ ¸å¿ƒAPIå°è£…ç±»
- `fund_query_example.py` - ä½¿ç”¨ç¤ºä¾‹
- `README_FUND_API.md` - æœ¬æ–‡æ¡£

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

```python
from fund_api import FundAPI

# åˆ›å»ºAPIå®ä¾‹
api = FundAPI()

# æŸ¥è¯¢å•ä¸ªåŸºé‡‘
fund_info = api.get_fund_realtime_value("000001")
if fund_info:
    api.print_fund_info(fund_info)
```

### æŸ¥è¯¢QDIIåŸºé‡‘

```python
# æŸ¥è¯¢æ˜“æ–¹è¾¾é»„é‡‘ä¸»é¢˜
fund_info = api.get_fund_realtime_value("161116")
```

### æœç´¢åŸºé‡‘

```python
# æœç´¢åŒ…å«"é»„é‡‘"çš„åŸºé‡‘
result = api.search_funds("é»„é‡‘")
print(result[['åŸºé‡‘ä»£ç ', 'åŸºé‡‘åç§°']].head())
```

### è·å–æ¶¨å¹…æ’è¡Œ

```python
# è·å–QDIIåŸºé‡‘æ¶¨å¹…å‰10
top_funds = api.get_top_funds(fund_type="QDII", top_n=10)
```

## ğŸ“Š è¿”å›æ•°æ®æ ¼å¼

### fund_infoå­—å…¸ç»“æ„

```python
{
    'åŸºé‡‘ä»£ç ': '000001',
    'åŸºé‡‘åç§°': 'åå¤æˆé•¿æ··åˆ',
    'æŸ¥è¯¢æ—¶é—´': '2026-02-01 21:38:34',
    'å®æ—¶ä¼°ç®—å‡€å€¼': 1.1806,
    'å®æ—¶ä¼°ç®—å¢é•¿ç‡': '0.65%',
    'æœ€æ–°å…¬å¸ƒå‡€å€¼': 1.167,
    'æœ€æ–°å…¬å¸ƒå¢é•¿ç‡': '-0.51%',
    'ä¼°ç®—åå·®': '1.16%',
    'ä¸Šä¸€æ—¥å‡€å€¼': 1.173
}
```

## ğŸ”§ APIå‚è€ƒ

### FundAPIç±»

#### `get_fund_realtime_value(fund_code: str) -> Optional[Dict]`

æŸ¥è¯¢æŒ‡å®šåŸºé‡‘çš„å®æ—¶ä¼°å€¼ã€‚

**å‚æ•°:**
- `fund_code` (str): 6ä½åŸºé‡‘ä»£ç 

**è¿”å›:**
- Dict: åŒ…å«åŸºé‡‘ä¿¡æ¯çš„å­—å…¸ï¼Œå¤±è´¥è¿”å›None

#### `get_funds_by_type(fund_type: str = "å…¨éƒ¨") -> Optional[pd.DataFrame]`

è·å–æŒ‡å®šç±»å‹çš„æ‰€æœ‰åŸºé‡‘å®æ—¶ä¼°å€¼ã€‚

**å‚æ•°:**
- `fund_type` (str): åŸºé‡‘ç±»å‹ï¼Œå¯é€‰å€¼:
  - 'å…¨éƒ¨'
  - 'è‚¡ç¥¨å‹'
  - 'æ··åˆå‹'
  - 'å€ºåˆ¸å‹'
  - 'æŒ‡æ•°å‹'
  - 'QDII'
  - 'ETFè”æ¥'
  - 'LOF'
  - 'åœºå†…äº¤æ˜“åŸºé‡‘'

**è¿”å›:**
- DataFrame: åŒ…å«æ‰€æœ‰åŸºé‡‘æ•°æ®

#### `search_funds(keyword: str) -> Optional[pd.DataFrame]`

æ ¹æ®å…³é”®è¯æœç´¢åŸºé‡‘ã€‚

**å‚æ•°:**
- `keyword` (str): æœç´¢å…³é”®è¯ï¼ˆåŸºé‡‘åç§°æˆ–ä»£ç ï¼‰

**è¿”å›:**
- DataFrame: åŒ¹é…çš„åŸºé‡‘æ•°æ®

#### `get_top_funds(fund_type: str = "å…¨éƒ¨", top_n: int = 10, sort_by: str = "ä¼°ç®—å¢é•¿ç‡") -> Optional[pd.DataFrame]`

è·å–æ¶¨å¹…æ’åå‰Nçš„åŸºé‡‘ã€‚

**å‚æ•°:**
- `fund_type` (str): åŸºé‡‘ç±»å‹
- `top_n` (int): è¿”å›å‰NåªåŸºé‡‘
- `sort_by` (str): æ’åºå­—æ®µ

**è¿”å›:**
- DataFrame: æ’åºåçš„åŸºé‡‘æ•°æ®

#### `print_fund_info(fund_info: Dict)`

æ ¼å¼åŒ–æ‰“å°åŸºé‡‘ä¿¡æ¯ã€‚

**å‚æ•°:**
- `fund_info` (Dict): åŸºé‡‘ä¿¡æ¯å­—å…¸

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: æŸ¥è¯¢å•ä¸ªåŸºé‡‘

```python
from fund_api import FundAPI

api = FundAPI()
fund_info = api.get_fund_realtime_value("000001")

if fund_info:
    print(f"åŸºé‡‘åç§°: {fund_info['åŸºé‡‘åç§°']}")
    print(f"å®æ—¶ä¼°ç®—å‡€å€¼: {fund_info['å®æ—¶ä¼°ç®—å‡€å€¼']}")
    print(f"å®æ—¶ä¼°ç®—å¢é•¿ç‡: {fund_info['å®æ—¶ä¼°ç®—å¢é•¿ç‡']}")
```

### ç¤ºä¾‹2: æ‰¹é‡æŸ¥è¯¢QDIIåŸºé‡‘

```python
api = FundAPI()
df = api.get_funds_by_type("QDII")

if df is not None:
    # æ˜¾ç¤ºå‰10åª
    print(df[['åŸºé‡‘ä»£ç ', 'åŸºé‡‘åç§°']].head(10))
```

### ç¤ºä¾‹3: æœç´¢å¹¶åˆ†æ

```python
api = FundAPI()

# æœç´¢é»„é‡‘ä¸»é¢˜åŸºé‡‘
gold_funds = api.search_funds("é»„é‡‘")

if gold_funds is not None:
    # è·å–ä¼°ç®—å¢é•¿ç‡åˆ—
    rate_col = [col for col in gold_funds.columns if 'ä¼°ç®—å¢é•¿ç‡' in col][0]
    
    # æ˜¾ç¤ºæ‰€æœ‰é»„é‡‘åŸºé‡‘åŠå…¶æ¶¨å¹…
    print(gold_funds[['åŸºé‡‘ä»£ç ', 'åŸºé‡‘åç§°', rate_col]])
```

### ç¤ºä¾‹4: ç›‘æ§å¤šåªåŸºé‡‘

```python
api = FundAPI()

# æˆ‘çš„è‡ªé€‰åŸºé‡‘åˆ—è¡¨
my_funds = ["000001", "161116", "110022"]

print("=" * 80)
print("æˆ‘çš„åŸºé‡‘å®æ—¶ä¼°å€¼ç›‘æ§")
print("=" * 80)

for fund_code in my_funds:
    fund_info = api.get_fund_realtime_value(fund_code)
    if fund_info:
        print(f"\n{fund_info['åŸºé‡‘åç§°']} ({fund_info['åŸºé‡‘ä»£ç ']})")
        print(f"  å‡€å€¼: {fund_info['å®æ—¶ä¼°ç®—å‡€å€¼']}")
        print(f"  æ¶¨å¹…: {fund_info['å®æ—¶ä¼°ç®—å¢é•¿ç‡']}")
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®æ›´æ–°æ—¶é—´**: å®æ—¶ä¼°å€¼æ•°æ®åœ¨äº¤æ˜“æ—¥æ›´æ–°ï¼Œç›˜åå¯èƒ½æ˜¾ç¤º"---"
2. **åŸºé‡‘ç±»å‹**: ä»…æ”¯æŒåœºå¤–åŸºé‡‘ï¼Œåœºå†…åŸºé‡‘(å¦‚ETF)è¯·ä½¿ç”¨å…¶ä»–æ¥å£
3. **ç½‘ç»œè¯·æ±‚**: é¦–æ¬¡æŸ¥è¯¢ä¼šè¯·æ±‚æ‰€æœ‰åŸºé‡‘æ•°æ®ï¼Œå¯èƒ½éœ€è¦å‡ ç§’é’Ÿ
4. **æ•°æ®å‡†ç¡®æ€§**: ä¼°ç®—å€¼ä»…ä¾›å‚è€ƒï¼Œä»¥åŸºé‡‘å…¬å¸å…¬å¸ƒçš„å‡€å€¼ä¸ºå‡†

## ğŸ” å¸¸è§é—®é¢˜

### Q: æŸ¥è¯¢ä¸åˆ°æŸä¸ªåŸºé‡‘ï¼Ÿ
A: è¯·ç¡®è®¤:
1. åŸºé‡‘ä»£ç æ˜¯å¦æ­£ç¡®ï¼ˆ6ä½æ•°å­—ï¼‰
2. è¯¥åŸºé‡‘æ˜¯å¦ä¸ºåœºå¤–åŸºé‡‘
3. è¯¥åŸºé‡‘æ˜¯å¦è¿˜åœ¨æ­£å¸¸è¿ä½œ

### Q: æ˜¾ç¤º"---"æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
A: è¡¨ç¤ºè¯¥æ•°æ®é¡¹æš‚æ— æ•°æ®ï¼Œå¯èƒ½åŸå› :
- éäº¤æ˜“æ—¶é—´
- åŸºé‡‘æš‚åœä¼°å€¼
- æ•°æ®æœªæ›´æ–°

### Q: å¦‚ä½•è·å–å†å²å‡€å€¼ï¼Ÿ
A: æœ¬APIä»…æä¾›å®æ—¶ä¼°å€¼ï¼Œå†å²å‡€å€¼è¯·ä½¿ç”¨AKShareçš„å…¶ä»–æ¥å£:
- `fund_open_fund_info_em()` - å¼€æ”¾å¼åŸºé‡‘å‡€å€¼
- `fund_etf_fund_info_em()` - ETFåŸºé‡‘å‡€å€¼

## ğŸ“ˆ è¿›é˜¶ç”¨æ³•

### è‡ªåŠ¨ç›‘æ§å¹¶é¢„è­¦

```python
import time
from fund_api import FundAPI

api = FundAPI()

def monitor_fund(fund_code, threshold=2.0):
    """ç›‘æ§åŸºé‡‘æ¶¨è·Œå¹…ï¼Œè¶…è¿‡é˜ˆå€¼æ—¶é¢„è­¦"""
    fund_info = api.get_fund_realtime_value(fund_code)
    
    if fund_info:
        rate_str = fund_info.get('å®æ—¶ä¼°ç®—å¢é•¿ç‡', '0%')
        rate = float(rate_str.rstrip('%'))
        
        if abs(rate) >= threshold:
            print(f"âš ï¸  é¢„è­¦: {fund_info['åŸºé‡‘åç§°']} æ¶¨è·Œå¹… {rate}% è¶…è¿‡é˜ˆå€¼!")
            return True
    
    return False

# æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡
while True:
    monitor_fund("000001", threshold=2.0)
    time.sleep(3600)  # ä¼‘çœ 1å°æ—¶
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯

æœ¬é¡¹ç›®éµå¾ªMITè®¸å¯è¯ã€‚
